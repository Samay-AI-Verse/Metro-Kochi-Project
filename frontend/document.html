
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Sarthi Astra</title>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap"
            rel="stylesheet">
        <link rel="stylesheet" href="/static/css/styles.css">
        <link rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
        <link rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.css">
        <script
            src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    </head>
    <body>
        <div class="header">
            <div class="logo">
                <div class="logo-icon">
                    <img src="/static/images/logo2.png" alt="Light Mode Logo"
                        class="logo-img light-logo">
                    <img src="/static/images/logo2.png" alt="Dark Mode Logo"
                        class="logo-img dark-logo">
                </div>
                Sarthi Astra
            </div>
            <div class="header-controls">
                <!-- ADD THIS NEW BUTTON -->
                <button class="theme-toggle-btn" id="theme-toggle-btn"
                    title="Toggle theme">
                    <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 24 24" fill="currentColor"><path
                            d="M12 2.25a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM7.5 12a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM18.894 6.106a.75.75 0 010 1.06l-1.591 1.59a.75.75 0 11-1.06-1.06l1.59-1.59a.75.75 0 011.06 0zM21.75 12a.75.75 0 01-.75.75h-2.25a.75.75 0 010-1.5H21a.75.75 0 01.75.75zM17.803 17.803a.75.75 0 01-1.06 0l-1.59-1.591a.75.75 0 111.06-1.06l1.59 1.59a.75.75 0 010 1.06zM12 21a.75.75 0 01-.75-.75v-2.25a.75.75 0 011.5 0V20.25a.75.75 0 01-.75.75zM6.106 18.894a.75.75 0 011.06 0l1.59 1.59a.75.75 0 01-1.06 1.06l-1.59-1.59a.75.75 0 010-1.06zM3 12a.75.75 0 01.75-.75h2.25a.75.75 0 010 1.5H3.75A.75.75 0 013 12zM6.697 6.697a.75.75 0 010-1.06l1.59-1.591a.75.75 0 111.06 1.06l-1.59 1.59a.75.75 0 01-1.06 0z"></path></svg>
                    <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 24 24" fill="currentColor"><path
                            fill-rule="evenodd"
                            d="M9.528 1.718a.75.75 0 01.162.819A8.97 8.97 0 009 6a9 9 0 009 9 8.97 8.97 0 004.463-.949a.75.75 0 01.819.162l.805.805a.75.75 0 01-.004 1.064A11.25 11.25 0 0112 21a11.25 11.25 0 01-9.472-5.452a.75.75 0 011.064-.004l.805.805a.75.75 0 01.819.162z"
                            clip-rule="evenodd"></path></svg>
                </button>
                <button class="share-btn" id="Share">
                    <i class="far fa-paper-plane"></i>
                    <span>Share</span>
                </button>
                <button class="settings-btn" id="settingsBtn">
                    <i class="fas fa-gear"></i>
                    <span>Settings</span>
                </button>

                <button class="profile-btn" id="profileBtn"><img
                        src="https://i.pinimg.com/736x/fa/d5/e7/fad5e79954583ad50ccb3f16ee64f66d.jpg"
                        alt></button>
            </div>
        </div>

        <div class="main-container">
            <!-- Collapsible Sidebar -->
            <div class="sidebar" id="sidebar">
                <!-- Sidebar Toggle Button -->

                <!-- Sidebar Content -->
                <div class="sidebar-content">
                    <div class="sidebar-header">
                        <div class="header-left">
                            <h3 class="sidebar-title">Vault</h3>
                        </div>
                        <!-- Thsi is a Side bar expanded animation button -->
                        <button class="sidebar-toggle-btn"
                            id="sidebar-toggle-btn" title="Toggle sidebar">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24"
                                height="24" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round">
                                <rect x="3" y="3" width="18" height="18" rx="2"
                                    ry="2"></rect>
                                <line x1="9" y1="3" x2="9" y2="21"></line>
                            </svg>
                        </button>
                    </div>

                    <!-- Sources Content -->
                    <div class="sources-content">
                        <button class="add-btn" onclick="openUploadModal()"
                            title="Add source">
                            <span class="btn-icon">+</span>
                            <span class="btn-text">Add</span>
                        </button>
                        <div class="sources-header">
                            <span class="sources-header-title">Select all
                                sources</span>

                            <div class="checkbox-wrapper-31" id="checkbox">
                                <input type="checkbox" id="selectAllCheckbox" />
                                <svg viewBox="0 0 35.6 35.6">
                                    <circle class="background" cx="17.8"
                                        cy="17.8" r="17.8"></circle>
                                    <circle class="stroke" cx="17.8" cy="17.8"
                                        r="14.37"></circle>
                                    <polyline class="check"
                                        points="11.78 18.12 15.55 22.23 25.17 12.87"></polyline>
                                </svg>
                            </div>
                        </div>

                        <div id="empty-state">
                            <div class="sources-icon">📄</div>
                            <div class="sources-title">Saved sources will appear
                                here</div>
                            <div class="sources-description">
                                Click Add source above to add PDFs, websites,
                                text, videos,<br>
                                or audio files. Or import a file directly from
                                Google Drive.
                            </div>
                        </div>

                        <div id="uploaded-files"
                            class="uploaded-files hidden"></div>
                    </div>
                </div>
            </div>

            <!-- Chat Section -->
            <div class="chat-section">
                <div class="chat-header">
                    <div class="chat-title">Sarthi</div>
                    <div class="header-controls"></div>
                </div>

                <!-- Chat Messages Area -->
                <div class="chat-messages-wrapper">
                    <!-- Welcome State -->
                    <div id="welcomeState" class="welcome-message">
                        <div class="welcome-icon">💬</div>
                        <div class="welcome-title">Welcome to your
                            notebook</div>
                        <div class="welcome-description">
                            Upload a source to start chatting. Ask questions,
                            get summaries,
                            or create study materials based on your content.
                        </div>
                        <button class="upload-btn"
                            onclick="openUploadModal()">Upload a source</button>
                    </div>

                    <!-- Chat Messages Container -->
                    <div id="chatMessagesContainer"
                        class="chat-messages-container hidden">
                        <div class="chat-messages" id="chatMessagesScroll">
                            <!-- Messages will be dynamically added here -->
                        </div>
                    </div>
                </div>

                <!-- Sticky Input Section -->
                <div class="chat-input-section">

                    <div class="chat-input-container" id="chatInputContainer">
                        <textarea
                            class="chat-input"
                            id="chatInput"
                            placeholder="Ask a question about your sources..."
                            rows="1"
                            disabled></textarea>
                        <div class="input-actions">
                            <button class="send-btn" id="sendBtn"
                                onclick="sendMessage()" disabled>➤</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="studio-section">
                <div class="studio-header">
                    <div class="studio-title">Workspace</div>
                    <button class="studio-toggle-btn" id="studio-toggle-btn"
                        title="Toggle studio">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24"
                            height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <rect x="3" y="3" width="18" height="18" rx="2"
                                ry="2"></rect>
                            <line x1="15" y1="3" x2="15" y2="21"></line>
                        </svg>
                    </button>
                </div>
                <div class="create-overview"></div>
                <div class="studio-tools">
                    <div class="tool-card">
                        <div class="tool-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="tool-name">Sarthi Chat</div>
                    </div>
                    <div class="tool-card">
                        <div class="tool-icon">
                            <i class="fas fa-square-poll-vertical"></i>
                        </div>
                        <div class="tool-name">Report Board</div>
                    </div>
                    <div class="tool-card">
                        <div class="tool-icon">
                            <i class="fas fa-bullseye"></i>
                        </div>
                        <div class="tool-name">IntelliAlert</div>
                    </div>
                    <div class="tool-card">
                        <div class="tool-icon">
                            <i class="fas fa-diagram-project"></i>
                        </div>
                        <div class="tool-name">DocMap View</div>
                    </div>
                    <!-- Tool details for expansion -->
                    <div class="tool-details-wrapper hidden"
                        id="toolDetailsWrapper">
                        <div class="tool-details-header">
                            <h3 class="tool-details-title"></h3>
                            <button class="close-details-btn"
                                id="closeDetailsBtn" title="Close">
                               <i class="fas fa-times"></i>
                            </button>
                        </div>

                        <div class="tool-details-content"
                            id="toolDetailsContent">
                            <div id="sarthiChatStudioView"
                                class="tool-view hidden">
                                <div class="chat-messages-container-studio">
                                    <div class="chat-messages-studio"
                                        id="chatMessagesStudioScroll">
                                    </div>
                                </div>
                                <div class="chat-input-studio-section">
                                    <div class="chat-input-container">
                                        <textarea class="chat-input"
                                            id="chatInputStudio"
                                            placeholder="Ask a quick question..."
                                            rows="1"></textarea>
                                        <div class="input-actions">
                                            <button class="send-btn"
                                                id="sendBtnStudio">➤</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div id="reportBoardView" class="tool-view hidden">
                                <p class="tool-info-text">This will be your
                                    interactive **Report Board** view. Data
                                    visualization elements (charts, tables) will
                                    load here.</p>
                                <div
                                    class="tool-content-placeholder">Chart/Dashboard
                                    Placeholder</div>
                                <button class="secondary-action-btn">Generate
                                    New Report</button>
                            </div>

                            <div id="intelliAlertView" class="tool-view hidden">
                                <p class="tool-info-text">IntelliAlert provides
                                    real-time insights based on your selected
                                    sources.</p>
                                <ul class="alert-list">
                                    <li><i class="fas fa-bell"></i> **Alert 1:**
                                        High concentration of a specific keyword
                                        detected.</li>
                                    <li><i class="fas fa-bell"></i> **Alert 2:**
                                        Potential conflict between two
                                        documents.</li>
                                </ul>
                                <button class="secondary-action-btn">View All
                                    Alerts</button>
                            </div>

                            <div id="docMapView" class="tool-view hidden">
                                <p class="tool-info-text">DocMap View visualizes
                                    the semantic relationships between all your
                                    uploaded documents.</p>
                                <div class="tool-content-placeholder">Document
                                    Map Placeholder (Mermaid Diagram)</div>
                                <button class="secondary-action-btn">Explore
                                    Full Map</button>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="studio-footer">
                    <button class="add-note-btn">
                        <span class="btn-icon">✏️</span>
                        <span class="btn-text">Add note</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- File Input -->
        <input type="file" id="fileInput" multiple
            accept=".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png,.mp3,.mp4,.avi">

        <!-- Upload Modal -->
        <div id="uploadModal" class="modal-overlay hidden">
            <div class="modal">
                <div class="modal-header">
                    <div class="modal-title-section">
                        <div class="modal-title">
                            <div class="logo-icon">📓</div>
                            MetroDocAI
                        </div>
                        <div class="modal-subtitle">Add sources</div>
                    </div>
                    <div class="modal-header-actions">

                        <button class="close-btn"
                            onclick="closeUploadModal()">✕</button>
                    </div>
                </div>
                <div class="modal-content">

                    <div class="upload-zone" id="modalUploadZone"
                        onclick="openFileDialog()"
                        ondrop="handleModalDrop(event)"
                        ondragover="handleModalDragOver(event)"
                        ondragleave="handleModalDragLeave(event)">
                        <div class="upload-zone-icon">⬆️</div>
                        <div class="upload-zone-title">Upload sources</div>
                        <div class="upload-zone-subtitle">
                            Drag & drop or <span class="choose-file-link"
                                onclick="openFileDialog(); event.stopPropagation();">choose
                                file</span> to upload
                        </div>
                        <div class="supported-types">
                            Supported file types: PDF, .txt, Markdown, Audio
                            (e.g. mp3)
                        </div>
                    </div>

                    <div class="source-options-grid">

                        <div class="source-option"
                            onclick="showComingSoon('Link')">
                            <div class="source-option-icon">🔗</div>
                            <div class="source-option-title">Link</div>
                        </div>
                        <div class="source-option"
                            onclick="showComingSoon('Paste text')">
                            <div class="source-option-icon">📄</div>
                            <div class="source-option-title">Paste text</div>
                        </div>
                        <div class="source-option"
                            onclick="showComingSoon('Google Drive')">
                            <div class="source-option-icon">📁</div>
                            <div class="source-option-title">Google Drive</div>
                        </div>

                    </div>

                    <!-- Source Limit Indicator -->
                    <div class="source-limit-container">
                        <div class="source-limit-text">
                            📄 Source limit
                        </div>
                        <div class="source-limit-progress">
                            <div class="progress-bar">
                                <div class="progress-fill"></div>
                            </div>
                            <span class="source-limit-count"
                                id="sourceLimitCount">0/50</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script src="/static/js/script.js"></script>

    </body>
</html>